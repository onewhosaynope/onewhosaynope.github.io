!function(){var e=function(e){this.element=e,this.media=this.element.getElementsByClassName("js-immerse-section-tr__media"),this.scrollContent=this.element.getElementsByClassName("js-immerse-section-tr__content"),this.media.length<1||(this.figure=this.media[0].getElementsByClassName("js-immerse-section-tr__figure"),this.figure.length<1||(this.visibleFigure=!1,this.mediaScale=1,this.mediaInitHeight=0,this.elementPadding=0,this.scrollingFn=!1,this.scrolling=!1,this.active=!1,this.scrollDelta=0,function(e){(function(e){0==parseInt(window.getComputedStyle(e.element).getPropertyValue("padding-top"))&&(e.element.style.paddingTop="1px")})(e),i(e),e.element.addEventListener("update-immerse-section",function(t){i(e)}),new IntersectionObserver(function(e){if(e[0].isIntersecting){if(this.scrollingFn)return;(i=this).scrollingFn=function(){this.scrolling||(this.scrolling=!0,window.requestAnimationFrame(n.bind(this)))}.bind(i),window.addEventListener("scroll",i.scrollingFn)}else{if(!this.scrollingFn)return;window.removeEventListener("scroll",this.scrollingFn),this.scrollingFn=!1}var i}.bind(e)).observe(e.media[0])}(this)))};function i(e){!function(e){e.visibleFigure=!1;for(var i=0;i<e.figure.length;i++)if("none"!=window.getComputedStyle(e.figure[i]).getPropertyValue("display")){e.visibleFigure=e.figure[i];break}}(e),function(e){e.active=!0,e.visibleFigure.offsetHeight>=window.innerHeight&&(e.active=!1);window.innerHeight-e.visibleFigure.offsetHeight>=600&&(e.active=!1)}(e),e.active?(Util.removeClass(e.element,"immerse-section-tr--disabled"),function(e){e.mediaInitHeight=e.visibleFigure.offsetHeight,e.scrollDelta=window.innerHeight-e.visibleFigure.offsetHeight>window.innerWidth-e.visibleFigure.offsetWidth?(window.innerHeight-e.visibleFigure.offsetHeight)/2:(window.innerWidth-e.visibleFigure.offsetWidth)/2,e.scrollDelta>window.innerHeight&&(e.scrollDelta=window.innerHeight);e.scrollDelta<200&&(e.scrollDelta=200);e.media[0].style.height=window.innerHeight+"px",e.media[0].style.paddingTop=(window.innerHeight-e.visibleFigure.offsetHeight)/2+"px",e.media[0].style.marginTop=(e.visibleFigure.offsetHeight-window.innerHeight)/2+"px"}(e),function(e){var i=t(window.innerWidth/e.visibleFigure.offsetWidth),n=t(window.innerHeight/e.visibleFigure.offsetHeight);e.mediaScale=Math.max(i,n),e.elementPadding=parseInt(window.getComputedStyle(e.element).getPropertyValue("padding-top"))}(e),function(e){e.scrollContent.length>0&&(e.scrollContent[0].style.marginTop=e.scrollDelta+"px")}(e),n.bind(e)()):(Util.addClass(e.element,"immerse-section-tr--disabled"),e.media[0].style="",e.scrollContent[0].style="",s(e,1),l(e,0)),e.element.dispatchEvent(new CustomEvent("immersive-section-updated",{detail:{active:e.active,asset:e.visibleFigure}}))}function t(e){return(Math.ceil(100*e)/100).toFixed(2)}function n(){if(this.active){var e=(window.innerHeight-this.mediaInitHeight)/2,i=this.element.getBoundingClientRect().top+this.elementPadding;if(i<e&&i>e-this.scrollDelta)s(this,1+(i-e)*(1-this.mediaScale)/this.scrollDelta),l(this,0);else i>=e?(s(this,1),l(this,0)):(s(this,this.mediaScale),l(this,1.8*(e-this.scrollDelta-i)/window.innerHeight));this.scrolling=!1}}function s(e,i){e.visibleFigure.style.transform="scale("+i+")",e.visibleFigure.style.msTransform="scale("+i+")"}function l(e,i){e.element.style.setProperty("--immerse-section-tr-opacity",i)}var r=document.getElementsByClassName("js-immerse-section-tr"),o=Util.osHasReducedMotion(),a="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype;if(!(r.length<1))if(!o&&a){for(var d=[],g=0;g<r.length;g++)!function(i){d.push(new e(r[i]))}(g);if(d.length>0){var c=!1,h=new CustomEvent("update-immerse-section");function m(){for(var e=0;e<d.length;e++)!function(e){d[e].element.dispatchEvent(h)}(e)}window.addEventListener("resize",function(){clearTimeout(c),c=setTimeout(m,500)})}}else for(g=0;g<r.length;g++)Util.addClass(r[g],"immerse-section-tr--disabled")}();